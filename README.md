# 代码统计工具 (Code Stats)

这是一个强大的代码统计分析工具，可以帮助开发者分析代码仓库的各种统计指标，包括代码行数、注释比例、Git贡献情况、文件大小分布等。支持生成可视化HTML报告，直观展示代码组成、贡献者分布及文件结构。

## 核心功能

- **代码统计分析**：快速分析源代码行数、注释比例、文件大小等关键指标
- **语言分类统计**：自动识别编程语言，分类展示不同语言的代码组成特点
- **Git仓库分析**：深入分析Git提交历史、贡献者信息和代码变更情况
- **贡献者看板**：可视化展示团队成员贡献情况，包含详细提交统计和时间线
- **文件浏览器**：交互式浏览代码结构，快速查看单个文件的统计详情
- **可视化报表**：生成美观的HTML报告，包含多种图表和数据表格展示

## 安装方法

### 通过Go安装

```bash
go install github.com/lllllan02/code-stats@latest
```

### 从源码编译

```bash
git clone https://github.com/lllllan02/code-stats.git
cd code-stats
go build
```

## 使用方法

### 基本用法

分析当前目录并生成默认报告:

```bash
code-stats
```

分析指定目录:

```bash
code-stats -path=/path/to/project
```

### 命令行选项

```
基本选项:
  -path           指定分析的目录路径（默认为当前目录）
  -exclude-dirs   排除特定目录，逗号分隔（如：node_modules,vendor）
  -exclude-exts   排除特定文件扩展名，逗号分隔（如：.log,.tmp）
  -output         报告输出文件路径（默认为code-stats-report.html）
  -help           显示帮助信息

性能与行为选项:
  -max-workers    最大并发工作线程数（默认为10）
  -follow-links   是否跟踪符号链接（默认为false）
  -verbose        显示详细日志输出（默认为false）

报告定制选项:
  -top            在报告中显示前N个文件（默认为20）
```

### 使用示例

分析项目目录，排除常见的依赖和构建目录:

```bash
code-stats -path=/path/to/project -exclude-dirs=node_modules,.git,vendor,build,dist
```

定制报告内容和文件名:

```bash
code-stats -output=我的项目分析报告.html -top=50
```

高性能分析大型代码库:

```bash
code-stats -max-workers=16 -exclude-dirs=node_modules,vendor
```

## 报告内容详解

生成的HTML报告包含以下主要部分:

### 1. 总体摘要

- **基本统计**: 总文件数、总代码量、代码/注释/空白行数及占比
- **代码组成图表**: 直观展示代码、注释、空白行的比例
- **语言分布图表**: 展示项目中各编程语言的代码量分布

### 2. 语言统计

详细统计表格，包含每种语言的:
- 文件数量
- 代码行数
- 注释行数
- 空白行数
- 注释比例
- 平均行长度

### 3. 扩展名统计

按文件扩展名分类的统计表格，包含:
- 文件数量
- 代码行数
- 总行数
- 平均文件大小

### 4. 最大文件分析

按文件大小排序的文件列表，包含:
- 文件路径
- 文件大小
- 总行数
- 代码行数
- 注释行数

### 5. 最长文件分析

按代码行数排序的文件列表，包含:
- 文件路径
- 代码行数
- 注释行数
- 空白行数
- 注释比例

### 6. Git统计分析

当分析Git仓库时，报告包含以下Git相关信息:

- **基本Git信息**: 提交总数、贡献者数量、首次/最后提交时间、活跃天数
- **变更统计**: 添加/删除行数总计、文件变更总数
- **贡献者排行**: 按提交数量排序的贡献者列表
- **贡献者图表**: 贡献者分布饼图和提交活跃度图表

### 7. 贡献者看板

- **贡献者总览**: 提交分布饼图和代码量对比柱状图
- **贡献者详情表**: 每位贡献者的详细统计，包含:
  - 提交数量
  - 添加/删除行数
  - 修改文件数
  - 活跃天数
  - 首次/最后提交日期
  - 平均每次提交添加行数

### 8. 文件浏览器

交互式文件浏览功能，支持:
- 目录树结构导航
- 文件详情查看
- 文件统计信息可视化
- 单文件代码组成分析

## 技术实现

- 基于Go语言开发，利用goroutine实现高效并行分析
- 采用HTML、JavaScript和CSS生成交互式可视化报告
- 使用Chart.js实现数据可视化，DataTables实现表格展示
- 通过Git命令行接口抓取并分析仓库历史信息

## 许可证

MIT 